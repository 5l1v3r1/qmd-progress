language: python

addons:
    apt:
        sources:
            - ubuntu-toolchain-r-test
            - george-edison55-precise-backports
            - sourceline: 'ppa:nicolasbock/qmmd'
        packages:
            - cmake
            - cmake-data
            - g++-6
            - gcc-6
            - gfortran-6
            - libblas-dev
            - libbml-dev
            - liblapack-dev
            - libmetis-dev
            - python
            - python3-numpy
            - python-numpy

env:
    - CC=gcc-6 FC=gfortran-6 CXX=g++-6 OMP_NUM_THREADS=1 PROGRESS_OPENMP=yes PROGRESS_GRAPHLIB=no COMMAND=testing
    - CC=gcc-6 FC=gfortran-6 CXX=g++-6 OMP_NUM_THREADS=1 PROGRESS_OPENMP=yes PROGRESS_GRAPHLIB=yes COMMAND=testing

script:
    -  VERBOSE_MAKEFILE=yes PROGRESS_TESTING=yes CMAKE_BUILD_TYPE=Debug PROGRESS_EXAMPLES=yes ./build.sh ${COMMAND}
    -  cd examples/gpmd; ./run_test.sh
